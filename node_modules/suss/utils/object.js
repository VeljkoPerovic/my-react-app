/**
 * Created by franco on 14/09/2016.
 * Utilitário para verificações de objetos
 */

// --------------------------------------------------
// METHODS
// --------------------------------------------------

/**
 * Normaliza uma variável ou um array de variáveis capturando o primeiro valor válido ou ainda retornando um valor default
 * @param values
 * @param defaultValue
 * @returns {*}
 */
function normalizeOrDefault(values, defaultValue) {

    // Verificação de valor não existente
    if (!values) {
        return defaultValue;
    }

    // Verificação de tipo de valor
    switch (typeof values) {

        // Retorno de valor ou default
        case 'string':
            return (values.length == 0) ? defaultValue : values;

        case 'boolean':
            return values;
    }

    // Verificação de tamanho de valor
    if (values.length && values.length > 0) {

        // Percorre os valores
        for (var i = 0; i < values.length; i++) {

            // Verifica se o valor é válido
            if (typeof values[i] === 'string' && values[i].length > 0) {
                return values[i];
            }
        }
    }

    // Retorna um valor padrão
    return defaultValue;
}

/**
 * Clona um objeto
 * @param object
 * @returns {{}}
 */
function cloneObject(object) {
    var clone = {};
    Object.keys(object).forEach(function (key) {
        if (typeof object[key] === 'object') {
            clone[key] = cloneObject(object[key]);
        } else {
            clone[key] = object[key];
        }
    });
    return clone;
}

// --------------------------------------------------
// EXPORTS
// --------------------------------------------------

module.exports.normalizeOrDefault = normalizeOrDefault;
module.exports.clone = cloneObject;
